<main class="register-bg">
    <div class="card register-card container p-4 p-sm-5">
        <div class="row justify-content-center text-center">
            <div class="col">
                <img src="EduRoom_logo_transparent.png" height="180" width="180" alt="Logo EduRoom">
            </div>
        </div>

        <div class="row p-3 pt-4 pb-4 p-lg-5">
            <form [formGroup]="registerForm" novalidate>
                <div class="row g-3">
                    <div class="col-12 col-md-6">
                        <input class="form-control" type="text" placeholder="Apellido" formControlName="lastname">
                        @if (lastname.invalid && (lastname.dirty || lastname.touched)) {
                            <div class="invalid-feedback d-block">
                                @if (lastname.hasError("required")) {Introduzca un apellido}
                                @if (lastname.hasError("maxlength")) {Demasiado largo}
                                @if (lastname.hasError("pattern")) {Apellido inválido}
                            </div>
                        }
                    </div>
                
                    <div class="col-12 col-md-6">
                        <input class="form-control" type="text" placeholder="Nombre" formControlName="name">
                        @if (name.invalid && (name.dirty || name.touched)) {
                            <div class="invalid-feedback d-block">
                                @if (name.hasError("required")) {Introduzca un nombre}
                                @if (name.hasError("maxlength")) {Demasiado largo}
                                @if (name.hasError("pattern")) {Nombre inválido}
                            </div>
                        }
                    </div>
                
                    <div class="col-12 col-md-6">
                        <input class="form-control" type="text" placeholder="CUIL" formControlName="cuil">
                        @if (cuil.invalid && (cuil.dirty || cuil.touched)) {
                            <div class="invalid-feedback d-block">
                                @if (cuil.hasError("required")) {Introduzca un CUIL}
                                @if (cuil.hasError("minlength") || cuil.hasError("maxlength") || cuil.hasError("pattern")) {CUIL inválido}
                            </div>
                        }
                    </div>
                
                    <div class="col-12 col-md-6">
                        <input class="form-control" type="tel" placeholder="Teléfono" formControlName="tel">
                        @if (tel.invalid && (tel.dirty || tel.touched)) {
                            <div class="invalid-feedback d-block">
                                @if (tel.hasError("required")) {Introduzca un número de teléfono}
                                @if (tel.hasError("pattern")) {Número de teléfono inválido}
                            </div>
                        }
                    </div>
                
                    <div class="col-12 col-md-6">
                        <select (change)="onProvinceChange()" class="form-select" formControlName="province">
                            <option value="" disabled>Seleccione una provincia</option>
                            @for (province of provinces; track $index) {
                                <option class="option" value="{{province.id}}">{{province.nombre}}</option>
                            }
                        </select>
                        @if (province.invalid && (province.dirty || province.touched)) {
                            <div class="invalid-feedback d-block">
                                Seleccione una provincia
                            </div>
                        }
                    </div>
                
                    <div class="col-12 col-md-6">
                        <select class="form-select" formControlName="location">
                            <option value="" disabled>Seleccione una localidad</option>
                            @for (location of locations; track $index) {
                                <option class="option" value="{{location.id}}">{{location.nombre}}</option>
                            }
                        </select>
                        @if (location.invalid && (location.dirty || location.touched)) {
                            <div class="invalid-feedback d-block">
                                Seleccione una localidad
                            </div>
                        }
                    </div>
                
                    <div class="col-12 col-md-6">
                        <input class="form-control" type="text" placeholder="Domicilio" formControlName="address">
                        @if (address.invalid && (address.dirty || address.touched)) {
                            <div class="invalid-feedback d-block">
                                @if (address.hasError("required")) {Introduzca un domicilio}
                                @if (address.hasError("maxlength")) {Demasiado largo}
                                @if (address.hasError("pattern")) {Domicilio inválido}
                            </div>
                        }
                    </div>
                
                    <div class="col-12 col-md-6">
                        <input class="form-control" type="email" placeholder="Correo electrónico" formControlName="email">
                        @if (email.invalid && (email.dirty || email.touched)) {
                            <div class="invalid-feedback d-block">
                                @if (email.hasError("required")) {Introduzca un correo electrónico}
                                @if (email.hasError("maxlength")) {Demasiado largo}
                                @if (email.hasError("pattern")) {Correo electrónico inválido}
                            </div>
                        }
                    </div>
                
                    <div class="col-12 col-md-6">
                        <input class="form-control" type="password" placeholder="Contraseña" formControlName="password">
                        @if (password.invalid && (password.dirty || password.touched)) {
                            <div class="invalid-feedback d-block">
                                @if (password.hasError("required")) {Introduzca una contraseña}
                                @if (password.hasError("maxlength")) {Contraseña demasiado larga}
                            </div>
                        }
                    </div>
                
                    <div class="col-12 col-md-6">
                        <input class="form-control" type="password" placeholder="Repetir contraseña" formControlName="matchPassword">
                        @if (matchPassword.invalid && (matchPassword.dirty || matchPassword.touched)) {
                            <div class="invalid-feedback d-block">
                                @if (matchPassword.hasError("required")) {Vuelva a introducir la contraseña}
                                @if (matchPassword.hasError("maxlength")) {Contraseña demasiado larga}
                                @if (matchPassword.hasError("passwordMismatch")) {La contraseña no coincide}
                            </div>
                        }
                    </div>
                
                    <div class="col-12 col-md-6">
                        <select class="form-select" formControlName="rol">
                            <option value="" disabled>Seleccione un rol</option>
                            @for (rol of roles; track $index) {
                                <option class="option" value="{{rol.name}}">{{rol.name}}</option>
                            }
                        </select>
                        @if (rol.invalid && (rol.dirty || rol.touched)) {
                            <div class="invalid-feedback d-block">
                                Seleccione un rol
                            </div>
                        }
                    </div>
                </div>
                
                <div class="row pt-5 text-center">
                    <div class="col-12">
                        <button class="btn btn-primary px-5" (click)="registerUser()">Registrarse</button>
                    </div>
                    <div class="col-12">
                        <p class="pt-4">
                            <a class="a-accent" routerLink="/public/auth/login">¿Ya tienes una cuenta? Inicia Sesión</a>
                        </p>
                    </div>
                </div>
            </form>
        </div>
    </div>
</main>

<app-notification-toast></app-notification-toast>
